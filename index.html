<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Text Encoder / Decoder</title>
  <style>
    :root{
      --bg:#0f1113;
      --panel:#1b1f22;
      --card:#16181a;
      --muted:#9aa0a6;
      --accent:#00e676; /* neon green */
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
    }
    *{box-sizing:border-box;font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color: #e6eef0}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#0b0c0d 0%, #0f1113 100%);display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:520px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:18px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow: 0 10px 30px rgba(0,0,0,0.6)}
    .tabs{display:flex;gap:20px;align-items:center;margin-bottom:6px}
    .tab{padding:10px 18px;border-radius:999px;cursor:pointer;color:var(--muted);background:transparent}
    .tab.active{color:var(--accent);box-shadow:inset 0 -3px 0 var(--accent);font-weight:600}
    h1{margin:4px 0 18px;font-size:28px;color:var(--accent);text-align:center}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    label{display:block;font-weight:700;margin-bottom:8px;color:#dfffe6}
    textarea, select{width:100%;background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:14px;border-radius:10px;color:#cfece0;font-size:15px;resize:vertical;min-height:110px}
    select{height:46px}
    .row{display:grid;gap:12px;margin-top:14px}
    .controls{display:flex;gap:10px;align-items:center;justify-content:flex-end;margin-top:8px}
    .btn{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:#04210a;font-weight:700;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--muted);font-weight:600}
    .out-wrap{position:relative}
    .copy-btn{position:absolute;right:12px;top:12px;padding:8px 10px;border-radius:8px;border:none;background:var(--accent);color:#04210a;font-weight:700;cursor:pointer}
    .small{font-size:13px;color:var(--muted);margin-top:6px}
    @media(max-width:520px){
      .wrap{padding:14px}
      h1{font-size:22px}
    }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <div class="tabs" role="tablist">
      <div class="tab active" data-tab="encode" role="tab" aria-selected="true">Encoder</div>
      <div class="tab" data-tab="decode" role="tab" aria-selected="false">Decoder</div>
    </div>

    <h1>Text Encoder</h1>

    <div id="encodePanel" class="card" aria-hidden="false">
      <label for="inputText">Enter Text to Encode:</label>
      <textarea id="inputText" placeholder="Type or paste your text here..."></textarea>

      <div class="row">
        <div>
          <label for="encodeType">Select Encoding Type:</label>
          <select id="encodeType">
            <option value="base64">Base64</option>
            <option value="url">URL Encode</option>
            <option value="hex">Hex (UTF-8)</option>
            <option value="rot13">ROT13</option>
          </select>
        </div>

        <div class="out-wrap">
          <label for="outputText">Encoded Output:</label>
          <textarea id="outputText" readonly placeholder="Encoded result will appear here..."></textarea>
          <button id="copyBtn" class="copy-btn" title="Copy">Copy</button>
        </div>

        <div class="controls">
          <button id="encodeBtn" class="btn">Encode</button>
          <button id="clearBtn" class="btn secondary">Clear</button>
        </div>

        <div class="small">Tip: Unicode text (Bangla, Emojis) supported for Base64/Hex via proper encoding.</div>
      </div>
    </div>

    <div id="decodePanel" class="card" style="margin-top:14px;display:none" aria-hidden="true">
      <label for="inputDecode">Enter Text to Decode:</label>
      <textarea id="inputDecode" placeholder="Put encoded text here..."></textarea>

      <div class="row">
        <div>
          <label for="decodeType">Select Decoding Type:</label>
          <select id="decodeType">
            <option value="base64">Base64</option>
            <option value="url">URL Decode</option>
            <option value="hex">Hex (UTF-8)</option>
            <option value="rot13">ROT13</option>
          </select>
        </div>

        <div class="out-wrap">
          <label for="decodeOutput">Decoded Output:</label>
          <textarea id="decodeOutput" readonly placeholder="Decoded result will appear here..."></textarea>
          <button id="copyBtn2" class="copy-btn" title="Copy">Copy</button>
        </div>

        <div class="controls">
          <button id="decodeBtn" class="btn">Decode</button>
          <button id="clearBtn2" class="btn secondary">Clear</button>
        </div>

        <div class="small">Error messages (when invalid input) will appear in the output area.</div>
      </div>
    </div>

  </div>

<script>
  // Tabs
  document.querySelectorAll('.tab').forEach(t => {
    t.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      const tab = t.dataset.tab;
      if(tab === 'encode'){
        document.getElementById('encodePanel').style.display = ''; document.getElementById('decodePanel').style.display = 'none';
      } else {
        document.getElementById('encodePanel').style.display = 'none'; document.getElementById('decodePanel').style.display = '';
      }
    });
  });

  // Utilities for unicode-safe base64
  function utf8ToBase64(str){
    const encoder = new TextEncoder();
    const bytes = encoder.encode(str);
    let binary = '';
    for (let i=0;i<bytes.byteLength;i++) binary += String.fromCharCode(bytes[i]);
    return btoa(binary);
  }
  function base64ToUtf8(b64){
    try{
      const binary = atob(b64);
      const bytes = new Uint8Array(binary.length);
      for(let i=0;i<binary.length;i++) bytes[i] = binary.charCodeAt(i);
      const decoder = new TextDecoder();
      return decoder.decode(bytes);
    }catch(e){
      throw new Error('Invalid Base64 input.');
    }
  }

  // Hex encode/decode (UTF-8)
  function strToHex(str){
    const enc = new TextEncoder(); const bytes = enc.encode(str);
    return Array.from(bytes).map(b => b.toString(16).padStart(2,'0')).join('');
  }
  function hexToStr(hex){
    if(hex.length % 2 !== 0) throw new Error('Invalid hex string');
    const bytes = new Uint8Array(hex.length/2);
    for(let i=0;i<hex.length;i+=2) bytes[i/2] = parseInt(hex.slice(i,i+2),16);
    const dec = new TextDecoder(); return dec.decode(bytes);
  }

  // ROT13
  function rot13(str){
    return str.replace(/[A-Za-z]/g, function(c){
      return String.fromCharCode( (c<='Z'?90:122) >= (c.charCodeAt(0) + 13) ? c.charCodeAt(0)+13 : c.charCodeAt(0)-13 );
    });
  }

  // DOM refs
  const inputText = document.getElementById('inputText');
  const encodeType = document.getElementById('encodeType');
  const outputText = document.getElementById('outputText');
  const encodeBtn = document.getElementById('encodeBtn');
  const clearBtn = document.getElementById('clearBtn');
  const copyBtn = document.getElementById('copyBtn');

  const inputDecode = document.getElementById('inputDecode');
  const decodeType = document.getElementById('decodeType');
  const decodeOutput = document.getElementById('decodeOutput');
  const decodeBtn = document.getElementById('decodeBtn');
  const clearBtn2 = document.getElementById('clearBtn2');
  const copyBtn2 = document.getElementById('copyBtn2');

  encodeBtn.addEventListener('click', () => {
    const txt = inputText.value || '';
    if(!txt){ outputText.value = ''; return; }
    try{
      let res = '';
      switch(encodeType.value){
        case 'base64': res = utf8ToBase64(txt); break;
        case 'url': res = encodeURIComponent(txt); break;
        case 'hex': res = strToHex(txt); break;
        case 'rot13': res = rot13(txt); break;
        default: res = txt;
      }
      outputText.value = res;
    }catch(e){
      outputText.value = 'Error: ' + (e.message || e);
    }
  });

  decodeBtn.addEventListener('click', () => {
    const txt = inputDecode.value || '';
    if(!txt){ decodeOutput.value = ''; return; }
    try{
      let res = '';
      switch(decodeType.value){
        case 'base64': res = base64ToUtf8(txt); break;
        case 'url': res = decodeURIComponent(txt); break;
        case 'hex': res = hexToStr(txt); break;
        case 'rot13': res = rot13(txt); break;
        default: res = txt;
      }
      decodeOutput.value = res;
    }catch(e){
      decodeOutput.value = 'Error: ' + (e.message || e);
    }
  });

  clearBtn.addEventListener('click', () => { inputText.value=''; outputText.value=''; });
  clearBtn2.addEventListener('click', () => { inputDecode.value=''; decodeOutput.value=''; });

  // copy helpers
  async function copyText(text, btn){
    try{
      await navigator.clipboard.writeText(text);
      const original = btn.textContent;
      btn.textContent = 'Copied';
      setTimeout(()=> btn.textContent = original, 1200);
    }catch(e){
      alert('Copy failed: ' + (e.message || e));
    }
  }
  copyBtn.addEventListener('click', ()=> copyText(outputText.value || '', copyBtn));
  copyBtn2.addEventListener('click', ()=> copyText(decodeOutput.value || '', copyBtn2));

  // allow Ctrl+Enter for quick encode/decode
  inputText.addEventListener('keydown', e => { if(e.ctrlKey && e.key === 'Enter') encodeBtn.click(); });
  inputDecode.addEventListener('keydown', e => { if(e.ctrlKey && e.key === 'Enter') decodeBtn.click(); });

  // Pre-fill example (optional)
  // inputText.value = 'নমস্কার! This is a test ✨';
</script>
</body>
</html>